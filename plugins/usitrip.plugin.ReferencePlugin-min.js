Usitrip.ns("usitrip.plugin"),usitrip.plugin.ReferencePlugin=function(config){Usitrip.apply(this,config),usitrip.plugin.ReferencePlugin.superclass.constructor.apply(this,arguments),this.init(config)},Usitrip.extend(usitrip.plugin.ReferencePlugin,usitrip.event.UsitripEvent,{btnEl:null,sourceSelector:null,targetSelector:null,callback:null,mapping:null,init:function(cfg){var self=this;this.btnEl.live("click",function(){var oSource=null;oSource=self.sourceSelector.constructor==Function?self.sourceSelector(this):$(self.sourceSelector);var oTarget=null;oTarget=self.targetSelector.constructor==Function?self.targetSelector(this):$(self.targetSelector);var mapping=self.mapping;if(mapping){var mappingId=mapping.id,mappingName=mapping.name,mappingClass=mapping["class"];for(var p in mappingClass){var value=mappingClass[p],sSelector='input[class^="'+p+'"],select[class^="'+p+'"]';if(value.indexOf(",")>-1)for(var arr=value.split(","),i=0,len=arr.length;len>i;i++){var result=arr[i].replace(/(^\s*)|(\s*$)/g,""),tSelector='input[class^="'+result+'"],select[class^="'+result+'"]';self.setValue(oSource.filter(sSelector),oTarget.filter(tSelector))}else{var tSelector='input[class^="'+value+'"],select[class^="'+value+'"]';self.setValue(oSource.filter(sSelector),oTarget.filter(tSelector))}}for(var p in mappingName){var value=mappingName[p],sSelector='input[name^="'+p+'"],select[name^="'+p+'"]';if(value.indexOf(",")>-1)for(var arr=value.split(","),i=0,len=arr.length;len>i;i++){var result=arr[i].replace(/(^\s*)|(\s*$)/g,""),tSelector='input[name^="'+result+'"],select[name^="'+result+'"]';self.setValue(oSource.filter(sSelector),oTarget.filter(tSelector))}else{var tSelector='input[name^="'+value+'"],select[name^="'+value+'"]';self.setValue(oSource.filter(sSelector),oTarget.filter(tSelector))}}for(var p in mappingId){var value=mappingId[p],sSelector='input[id^="'+p+'"],select[id^="'+p+'"]';if(value.indexOf(",")>-1)for(var arr=value.split(","),i=0,len=arr.length;len>i;i++){var result=arr[i].replace(/(^\s*)|(\s*$)/g,""),tSelector='input[id^="'+result+'"],select[id^="'+result+'"]';self.setValue(oSource.filter(sSelector),oTarget.filter(tSelector))}else{var tSelector='input[id^="'+value+'"],select[id^="'+value+'"]';self.setValue(oSource.filter(sSelector),oTarget.filter(tSelector))}}}else oSource.each(function(index,el){self.setValue($(this),oTarget.eq(index))});null!=self.callback&&self.callback(this)})},setValue:function(oSource,oTarget){if(oSource.is("select"))oTarget.val(oSource.val());else{var type=oSource.attr("type");"checkbox"===type?oTarget.attr("checked",!!oSource.attr("checked")):"radio"===type?oTarget.attr("checked",oSource.attr("checked")):"select"===type?oTarget.attr("checked",oSource.attr("checked")):oTarget.val(oSource.val())}}});